<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Betweenness Centrality metrics using Conefor command line — MK_BCentrality • Makurhini</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Betweenness Centrality metrics using Conefor command line — MK_BCentrality"><meta property="og:description" content="Use this function to calculate the BC, BCIIC and BCPC indexes under one or several distance thresholds using Conefor command line."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Makurhini</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Fragmentation_statistics.html">Fragmentation statistics</a>
    </li>
    <li>
      <a href="../articles/PC_IIC.html">PC and IIC indexes</a>
    </li>
    <li>
      <a href="../articles/ProtConn.html">ProtConn</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/connectscape/Makurhini/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Betweenness Centrality metrics using Conefor command line</h1>
    <small class="dont-index">Source: <a href="https://github.com/connectscape/Makurhini/blob/HEAD/R/MK_BCentrality.R" class="external-link"><code>R/MK_BCentrality.R</code></a></small>
    <div class="hidden name"><code>MK_BCentrality.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use this function to calculate the BC, BCIIC and BCPC indexes under one or several distance thresholds using Conefor command line.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">MK_BCentrality</span><span class="op">(</span></span>
<span>  <span class="va">nodes</span>,</span>
<span>  <span class="va">id</span>,</span>
<span>  attribute <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  area_unit <span class="op">=</span> <span class="st">"ha"</span>,</span>
<span>  distance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"centroid"</span>, resistance <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BC"</span>, <span class="st">"BCIIC"</span>, <span class="st">"BCPC"</span><span class="op">)</span>,</span>
<span>  distance_thresholds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  probability <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  LA <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  coneforpath <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dA <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dvars <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rasterparallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  write <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  intern <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-nodes">nodes<a class="anchor" aria-label="anchor" href="#arg-nodes"></a></dt>
<dd><p>Object containing nodes (e.g., habitat patches or fragments) information. It can be of the following classes:<br>
-   <code>Data.frame</code> with at least two columns: the first for node IDs and the second for attributes. <br>
-   Spatial data of type vector (class <code>sf, SpatVector, SpatialPolygonsDataFrame</code>). It must be in a projected coordinate system.<br>
-   Raster (class <code>RasterLayer, SpatRaster</code>). It must be in a projected coordinate system. The values must be integers representing the ID of each habitat patch or node, with non-habitat areas represented by NA values (see <a href="https://rdrr.io/pkg/raster/man/clump.html" class="external-link">clump</a> or <a href="https://rspatial.github.io/terra/reference/patches.html" class="external-link">patches</a>).</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p><code>character</code>. If nodes is a vector then you can specify the column name with the node ID.
If NULL, then a new id will be generated.</p></dd>


<dt id="arg-attribute">attribute<a class="anchor" aria-label="anchor" href="#arg-attribute"></a></dt>
<dd><p><code>character</code> or <code>vector</code>. If <code>NULL</code> the area of the nodes will be used as the node attribute. The unit of area can be selected using the <code>area_unit</code> parameter. To use an alternative attribute, consider the class type of the object in the <code>nodes</code> parameter: <br>
-   If <code>nodes</code> is a spatial vector or data.frame, specify <b>the name of the column</b> containing the attribute for the nodes. <br>
-   If <code>nodes</code> is a raster layer then it must be a numeric vector with the node's attribute. The length of the vector must be equal to the number of nodes.</p></dd>


<dt id="arg-area-unit">area_unit<a class="anchor" aria-label="anchor" href="#arg-area-unit"></a></dt>
<dd><p><code>character</code>. (<em>optional, default = </em> <code>"m2"</code>) <br>. A <code>character</code> indicating the area units when <code>attribute</code> is <code>NULL</code>. Some options are "m2" (the default), "km2", "cm2", or "ha";  See <a href="unit_convert.html">unit_convert</a> for details.</p></dd>


<dt id="arg-distance">distance<a class="anchor" aria-label="anchor" href="#arg-distance"></a></dt>
<dd><p>A <code>matrix</code> or <code>list</code> to establish the distance between each pair of nodes. Distance between nodes may be Euclidean distances (straight-line distance) or effective distances (cost distances) by considering the landscape resistance to the species movements. <br>
- If it is a <code>matrix</code>, then the number of columns and rows must be equal to the number of nodes. This distance matrix could be generated by the <a href="distancefile.html">distancefile</a> function.<br>
- If it is a <code>list</code> of parameters, then it must contain the distance parameters necessary to calculate the distance between nodes. For example, two of the most important parameters: <code>“type”</code> and <code>“resistance”</code>. For <code>"type"</code> choose one  of the distances:  <b>"centroid" (faster), "edge", "least-cost" or "commute-time"</b>. If the type is equal to <code>"least-cost"</code> or <code>"commute-time"</code>, then you must use the <code>"resistance"</code> argument. For example: <code>distance(type = "least-cost", resistance = raster_resistance)</code>. <br>
To see more arguments see the <a href="distancefile.html">distancefile</a> function.</p></dd>


<dt id="arg-metric">metric<a class="anchor" aria-label="anchor" href="#arg-metric"></a></dt>
<dd><p>A <code>character</code> indicating the Betweenness Centrality metric to use: <code>"BC"</code> (the classical), <code>“BCIIC”</code> considering binary indices and topological distances, and <code>“BCPC”</code> (recommended)  considering the maximum product probabilities.</p></dd>


<dt id="arg-distance-thresholds">distance_thresholds<a class="anchor" aria-label="anchor" href="#arg-distance-thresholds"></a></dt>
<dd><p>A <code>numeric</code> indicating the dispersal distance or distances (meters) of the considered species. If <code>NULL</code> then distance is estimated as the median dispersal distance between nodes. Alternatively, the <a href="dispersal_distance.html">dispersal_distance</a> function can be used to estimate the dispersal distance using the species home range.</p></dd>


<dt id="arg-probability">probability<a class="anchor" aria-label="anchor" href="#arg-probability"></a></dt>
<dd><p>A <code>numeric</code> value indicating the probability that corresponds to the distance specified in the <code>distance_threshold</code>. For example, if the <code>distance_threshold</code> is a median dispersal distance, use a probability of 0.5 (50%). If the <code>distance_threshold</code> is a maximum dispersal distance, set a probability of 0.05 (5%) or 0.01 (1%). Use in case of selecting the <code>"BCPC"</code> metric. If <code>probability = NULL</code>, then a probability of 0.5 will be used.</p></dd>


<dt id="arg-la">LA<a class="anchor" aria-label="anchor" href="#arg-la"></a></dt>
<dd><p><code>numeric</code>. (<em>optional, default = </em> <code>NULL</code>). The maximum landscape attribute, which is the attribute value that would correspond to a hypothetical habitat patch covering all the landscape with the best possible habitat, in which IIC and PC would be equal to 1. For example, if nodes attribute corresponds to the node area, then LA equals total landscape area. If nodes attribute correspond to a quality-weighted area and the quality factor ranges from 0 to 100, LA will be equal to 100 multiplied by total landscape area. The value of LA does not affect at all the importance of the nodes and is only used to calculate the overall landscape connectivity. If no LA value is entered (default) and  <code>overall = TRUE</code> or <code>onlyoverall = TRUE</code>, the function will only calculate the numerator of the global connectivity indices and the equivalent connected ECA or EC index.</p></dd>


<dt id="arg-coneforpath">coneforpath<a class="anchor" aria-label="anchor" href="#arg-coneforpath"></a></dt>
<dd><p><code>character</code>. Path to Conefor 2.6 with command line interface (http://www.conefor.org/coneforsensinode.html). Example, <code>"C:/Users/coneforWin64.exe"</code>.</p></dd>


<dt id="arg-da">dA<a class="anchor" aria-label="anchor" href="#arg-da"></a></dt>
<dd><p><code>logical</code>. If TRUE, then the delta attribute will be added to the node's importance result.</p></dd>


<dt id="arg-dvars">dvars<a class="anchor" aria-label="anchor" href="#arg-dvars"></a></dt>
<dd><p><code>logical</code>. If TRUE, then the absolute variation will be added to the node's importance result.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>(<em>optional, default =</em> <code>NULL</code>).
A <code>numeric</code> specifying the number of cores to parallelize the index estimation of the PC or IIC index and its deltas.Particularly useful when you have more than 1000 nodes. By default the analyses are not parallelized.</p></dd>


<dt id="arg-rasterparallel">rasterparallel<a class="anchor" aria-label="anchor" href="#arg-rasterparallel"></a></dt>
<dd><p><code>logical</code>. If parallel is <code>FALSE</code> and nodes is a <code>raster</code> then you can use this argument to assign the metrics values to the nodes raster. It is useful when raster resolution is less than 100 m<sup>2</sup>.</p></dd>


<dt id="arg-write">write<a class="anchor" aria-label="anchor" href="#arg-write"></a></dt>
<dd><p><code>character</code>. Write output shapefile, example, "C:/ejemplo.shp".</p></dd>


<dt id="arg-intern">intern<a class="anchor" aria-label="anchor" href="#arg-intern"></a></dt>
<dd><p><code>logical</code>. Show the progress of the process, default = TRUE. Sometimes the advance process does not reach 100 percent when operations are carried out very quickly.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>To use this function  you need to download and uncompress Conefor 2.6 with command line interface from <a href="http://www.conefor.org/coneforsensinode.html" class="external-link">http://www.conefor.org/coneforsensinode.html</a><br>
Betweenness Centrality metrics can be calculated in three different ways:<br>
- <b>BC</b> calculates the classical Betweenness Centrality metric as originally defined by Freeman (1977; Sociometry 40: 35–41). <br>
- <b>BCIIC and BCPC</b> calculate the improved version of the BC metric by Bodin and Saura (2010) integrated within the same analytical framework as the IIC (binary) and the PC (probabilistic) metrics.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Saura, S. and Torne, J. (2012). Conefor 2.6. Universidad Politecnica de Madrid. Available at <a href="www.conefor.org">www.conefor.org</a>.<br>
 Freeman L.C. (1977). Set of Measures of Centrality Based on Betweenness. Sociometry 40: 35-41.<br>
 Bodin, O. and Saura, S. (2010). Ranking individual habitat patches as connectivity providers: integrating network analysis and patch removal experiments. Ecological Modelling 221: 2393-2405.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/connectscape/Makurhini" class="external-link">Makurhini</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"habitat_nodes"</span>, package <span class="op">=</span> <span class="st">"Makurhini"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">habitat_nodes</span><span class="op">)</span> <span class="co">#Number of nodes</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Two distance thresholds.</span></span></span>
<span class="r-in"><span><span class="co">#You need to place your path to the conefor .exe</span></span></span>
<span class="r-in"><span><span class="va">BCIIC</span> <span class="op">&lt;-</span> <span class="fu">MK_BCentrality</span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">habitat_nodes</span>, id <span class="op">=</span> <span class="st">"Id"</span>,</span></span>
<span class="r-in"><span>            coneforpath <span class="op">=</span> <span class="st">"C:/Users/coneforWin64.exe"</span>,</span></span>
<span class="r-in"><span>            distance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"centroid"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            metric <span class="op">=</span> <span class="st">"BCIIC"</span>, LA <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>            distance_thresholds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">30000</span><span class="op">)</span><span class="op">)</span> <span class="co">#10 and 30 km</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Using raster</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"habitat_nodes_raster"</span>, package <span class="op">=</span> <span class="st">"Makurhini"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">##Using parallel</span></span></span>
<span class="r-in"><span><span class="va">BCPC_parallel</span> <span class="op">&lt;-</span> <span class="fu">MK_BCentrality</span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">habitat_nodes_raster</span>,</span></span>
<span class="r-in"><span>                    coneforpath <span class="op">=</span> <span class="st">"C:/Users/coneforWin64.exe"</span>,</span></span>
<span class="r-in"><span>                    id <span class="op">=</span> <span class="st">"id"</span>, attribute <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                    distance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"centroid"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    metric <span class="op">=</span> <span class="st">"BCPC"</span>, LA <span class="op">=</span> <span class="cn">NULL</span>, probability <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>                    distance_thresholds <span class="op">=</span> <span class="fl">40000</span>,</span></span>
<span class="r-in"><span>                    parallel <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="co">#40 and 60 km</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Oscar Godínez-Gómez, Camilo A. Correa Ayram.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

